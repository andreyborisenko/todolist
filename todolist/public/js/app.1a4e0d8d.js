(function(t){function e(e){for(var s,r,a=e[0],c=e[1],u=e[2],l=0,h=[];l<a.length;l++)r=a[l],i[r]&&h.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("64a9"),i=n.n(s);i.a},4795:function(t,e,n){},"507d":function(t,e,n){"use strict";var s=n("4795"),i=n.n(s);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var s=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoggedIn?n("div",[n("UserInfo",{attrs:{user:t.user},on:{logout:t.logout}}),n("CreateTodo",{on:{addTodo:t.addTodo}}),n("TodoList",{attrs:{todos:t.todos}})],1):n("UserForm",{on:{auth:t.onAuth}})],1)},o=[],r=(n("ac6a"),n("456d"),n("96cf"),n("1da1")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.todos,function(e){return n("TodoItem",{key:e.id,attrs:{todo:e},on:{completeTodo:t.completeTodo,saveTodo:t.saveTodo,deleteTodo:t.deleteTodo}})}))},c=[],u=(n("20d6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui centered card"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!isEditing"}],staticClass:"content"},[n("div",{staticClass:"header"},[t._v("\n        "+t._s(t.todo.title)+"\n    ")]),n("div",{staticClass:"extra content"},[n("span",{staticClass:"right floated edit icon",on:{click:function(e){t.isEditing=!0}}},[n("i",{staticClass:"edit icon big"})]),n("span",{staticClass:"right floated trash icon",on:{click:function(e){t.deleteTodo(t.todo)}}},[n("i",{staticClass:"trash icon big"})])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"content"},[n("div",{staticClass:"ui form"},[n("div",{staticClass:"field"},[n("label",[t._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"ui two button attached buttons"},[n("button",{staticClass:"ui basic blue button",on:{click:function(e){t.saveTodo(t.todo)}}},[t._v("\n          Save\n        ")]),n("button",{staticClass:"ui basic blue button",on:{click:function(e){t.isEditing=!1}}},[t._v("\n          Close X\n        ")])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing&&t.todo.isDone,expression:"!isEditing && todo.isDone"}],staticClass:"ui bottom attached green basic button",attrs:{disabled:""}},[t._v("\n      Completed\n  ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing&&!t.todo.isDone,expression:"!isEditing && !todo.isDone"}],staticClass:"ui bottom attached red basic button",on:{click:function(e){t.completeTodo(t.todo)}}},[t._v("\n      Pending\n  ")])])}),d=[],l={props:["todo"],data:function(){return{title:"",isEditing:!1}},methods:{saveTodo:function(t){var e=t._id;this.$emit("saveTodo",{id:e,title:this.title}),this.isEditing=!1},deleteTodo:function(t){var e=t._id;this.$emit("deleteTodo",e)},completeTodo:function(t){var e=t._id;this.$emit("completeTodo",e)}},watch:{isEditing:function(t){t&&(this.title=this.todo.title)}}},h=l,p=(n("cccd"),n("2877")),f=Object(p["a"])(h,u,d,!1,null,"77d7df53",null);f.options.__file="TodoItem.vue";var v=f.exports,m={props:["todos"],components:{TodoItem:v},methods:{deleteTodo:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.$apiPath,"/todos/").concat(e),{method:"DELETE",headers:{Authorization:this.$store.state.token}});case 2:if(n=t.sent,200==n.status){t.next=7;break}return t.abrupt("return",console.log("Unable to delete todo with id ".concat(e)));case 7:s=this.todos.findIndex(function(t){return t._id==e}),this.todos.splice(s,1);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),completeTodo:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.$apiPath,"/todos/").concat(e),{method:"PUT",headers:{Authorization:this.$store.state.token,"content-type":"application/json"},body:JSON.stringify({isDone:!0})});case 2:if(n=t.sent,200==n.status){t.next=7;break}return t.abrupt("return",console.log("Unable to complete todo with id ".concat(e)));case 7:s=this.todos.findIndex(function(t){return t._id==e}),this.todos[s].isDone=!0;case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),saveTodo:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,s,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.id,s=e.title,t.next=3,fetch("".concat(this.$apiPath,"/todos/").concat(n),{method:"PUT",headers:{Authorization:this.$store.state.token,"content-type":"application/json"},body:JSON.stringify({title:s})});case 3:if(i=t.sent,200==i.status){t.next=8;break}return t.abrupt("return",console.log("Unable to update todo with id ".concat(todoId)));case 8:return o=this.todos.findIndex(function(t){return t._id==n}),t.next=11,i.json();case 11:this.todos[o]=t.sent,this.$forceUpdate();case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},g=m,b=(n("7367"),Object(p["a"])(g,a,c,!1,null,"f673a470",null));b.options.__file="TodoList.vue";var w=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui basic content center aligned segment"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isCreating,expression:"!isCreating"}],staticClass:"ui basic button icon",on:{click:function(e){t.isCreating=!0}}},[n("i",{staticClass:"plus icon"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isCreating,expression:"isCreating"}],staticClass:"ui centered card"},[n("div",{staticClass:"content"},[n("div",{staticClass:"ui form"},[n("div",{staticClass:"field"},[n("label",[t._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"ui two button attached buttons"},[n("button",{staticClass:"ui basic blue button",attrs:{disabled:0==t.title.length},on:{click:t.sendForm}},[t._v("\n            Create\n          ")]),n("button",{staticClass:"ui basic red button",on:{click:function(e){t.isCreating=!1}}},[t._v("\n            Cancel\n          ")])])])])])])},_=[],k={data:function(){return{title:"",errorMessage:"",isCreating:!1}},methods:{sendForm:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.title.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("".concat(this.$apiPath,"/todos"),{method:"POST",headers:{Authorization:this.$store.state.token,"content-type":"application/json"},body:JSON.stringify({title:this.title})});case 4:if(e=t.sent,200==e.status){t.next=13;break}return console.log("Unable to add todo"),t.next=9,e.json();case 9:n=t.sent,this.errorMessage=n.message,t.next=19;break;case 13:return t.next=15,e.json();case 15:s=t.sent,this.$emit("addTodo",s),this.title="",this.isCreating=!1;case 19:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},C=k,T=Object(p["a"])(C,x,_,!1,null,null,null);T.options.__file="CreateTodo.vue";var y=T.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui centered user-info"},[n("h2",[t._v("Hello, "+t._s(t.user.email))]),n("button",{staticClass:"ui inverted red button",on:{click:function(e){t.$emit("logout")}}},[t._v("Logout")])])},O=[],E={name:"user-info",props:{user:{type:Object,required:!0}},data:function(){return{}}},$=E,P=(n("507d"),Object(p["a"])($,j,O,!1,null,"3c744d12",null));P.options.__file="UserInfo.vue";var R=P.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui centered card user-form"},[n("div",{staticClass:"ui form",class:{error:t.errorMessage.length>0}},[n("div",{staticClass:"field"},[n("label",[t._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"field"},[n("label",[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"ui two button attached buttons"},[n("button",{staticClass:"ui basic blue button",attrs:{disabled:!t.isButtonsEnabled},on:{click:t.register}},[t._v("\n        Register\n      ")]),n("button",{staticClass:"ui basic red button",attrs:{disabled:!t.isButtonsEnabled},on:{click:t.login}},[t._v("\n        Login\n      ")])]),t.errorMessage?n("div",{staticClass:"ui error message"},[n("div",{staticClass:"header"},[t._v(t._s(t.errorMessage))])]):t._e()])])},I=[],N=(n("6762"),n("2fdb"),{name:"user-form",data:function(){return{email:"",password:"",errorMessage:"",showError:!1}},methods:{register:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isButtonsEnabled){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("".concat(this.$apiPath,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})});case 4:if(e=t.sent,200!=e.status){t.next=10;break}return t.next=8,this.login();case 8:t.next=21;break;case 10:if(n=e.headers.get("Content-type"),!n.includes("json")){t.next=18;break}return t.next=14,e.json();case 14:s=t.sent,this.errorMessage=s.message,t.next=21;break;case 18:return t.next=20,e.text();case 20:this.errorMessage=t.sent;case 21:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),login:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isButtonsEnabled){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch("".concat(this.$apiPath,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})});case 5:if(e=t.sent,200!=e.status){t.next=14;break}return t.next=9,e.json();case 9:n=t.sent,this.$emit("auth",n),this.errorMessage="",t.next=17;break;case 14:return t.next=16,e.text();case 16:this.errorMessage=t.sent;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](2),this.errorMessage=t.t0.message;case 22:case"end":return t.stop()}},t,this,[[2,19]])}));return function(){return t.apply(this,arguments)}}()},computed:{isButtonsEnabled:function(){return this.password.length>0&&this.email.length>0}}}),M=N,U=(n("6bee"),Object(p["a"])(M,S,I,!1,null,"01c7c151",null));U.options.__file="UserForm.vue";var L=U.exports,A=n("a78e"),D=n.n(A),J={name:"app",components:{TodoList:w,CreateTodo:y,UserInfo:R,UserForm:L},data:function(){return{todos:[],isLoggedIn:this.$store.state.token.length>0,user:{}}},methods:{addTodo:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.todos.unshift(e);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onAuth:function(t){var e=t.token,n=t.user;console.log(e,n),D.a.set("jwt",e,{domain:"localhost"}),this.$store.commit({type:"SET_TOKEN",token:e}),this.isLoggedIn=!0,this.user=n,this.getInitialTodos()},getMe:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.$apiPath,"/me"),{headers:{Authorization:this.$store.state.token}});case 2:if(e=t.sent,200!=e.status){t.next=9;break}return t.next=6,e.json();case 6:this.user=t.sent,t.next=10;break;case 9:this.logout();case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getInitialTodos:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.$apiPath,"/todos?limit=100"),{headers:{Authorization:this.$store.state.token}});case 2:if(e=t.sent,200!=e.status){t.next=11;break}return t.next=6,e.json();case 6:n=t.sent,s=n.todos,this.todos=s,t.next=12;break;case 11:this.logout();case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),logout:function(){this.isLoggedIn=!1,this.$store.commit({type:"SET_TOKEN",token:""}),D.a.set("jwt","",{domain:"localhost"})}},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isLoggedIn){t.next=6;break}if(0!=Object.keys(this.user)){t.next=4;break}return t.next=4,this.getMe();case 4:return t.next=6,this.getInitialTodos();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},z=J,B=(n("034f"),Object(p["a"])(z,i,o,!1,null,null,null));B.options.__file="App.vue";var F=B.exports,K=n("2f62");s["a"].use(K["a"]);var q=new K["a"].Store({state:{todos:[],token:D.a.get("jwt")||""},actions:{GET_TODOS:function(){}},mutations:{SET_TOKEN:function(t,e){var n=e.token;t.token=n}}});s["a"].config.productionTip=!1,s["a"].prototype.$apiPath="http://localhost:5000",new s["a"]({store:q,render:function(t){return t(F)}}).$mount("#app")},"64a9":function(t,e,n){},"6b66":function(t,e,n){},"6bee":function(t,e,n){"use strict";var s=n("6b66"),i=n.n(s);i.a},7367:function(t,e,n){"use strict";var s=n("886b"),i=n.n(s);i.a},"886b":function(t,e,n){},cccd:function(t,e,n){"use strict";var s=n("ee62"),i=n.n(s);i.a},ee62:function(t,e,n){}});
//# sourceMappingURL=app.1a4e0d8d.js.map